<%- include("../partials/header") %>
<div class="container">
    <div class="row d-flex justify-content-center m-2">
      <%- include("../partials/messages") %>
    </div>
    <div class="row d-flex justify-content-center">
      <form action="/upload" method="POST" enctype="multipart/form-data">
          <div class="custom-file">
              <input type="file" class="form-control-file"
                     id="exampleFormControlFile1" name="file">
          </div>
          <div class="d-flex justify-content-center m-3">
            <button type="submit" class="btn btn-primary" id="uploadfile">
              Upload file
            </button>
          </div>
      </form>
    </div>
    <div class="row d-flex justify-content-center">
      <div id="accordion" role="tablist">
        <p class="text-center">To create a new HTML file, 
          <a data-toggle="collapse" href="#collapseOne" class="text-decoration-none"
             aria-expanded="true" aria-controls="collapseOne">
             Click here
          </a>
        </p>
        <div id="collapseOne" class="collapse"
             role="tabpanel" aria-labelledby="headingOne">
          <div class="card-body">
            <form action="/create" method="POST" enctype="multipart/form-data">
              <div class="row main d-flex justify-centent-center">
                <div class="form-group col-*-8 m-1">
                  <input type="text" class="form-control" name="name"
                         id="fileinput" placeholder="Enter the file name">
                </div>
                <div class="form-group m-1">
                  <button type="submit" id="createfile" class="btn btn-primary">
                    Create file
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <% if(files.length <= 0){ %>
      <div class="row d-flex justify-content-center">
        <p class="display-4 text-center">No files are imported</p>
      </div>
    <% }else{ %>
      <div class="d-flex justify-content-center">
        <ul class="list-group">
          <% files.forEach((file) => { %>
            <li class="list-group-item pl-5 pt-2 pb-2">
              <form action="/delete/<%= file._id %>?_method=DELETE"
                    method="post" class="row main d-flex justify-content-center">
                  <div class="row main mt-3">
                    <a href="/files/<%= file._id %>"
                       class="text-decoration-none mr-5">
                      <p class="text-center">
                        <i class="fa fa-file text-center" id="file"></i>
                        <%= file.filename %>
                      </p>
                    </a>
                    <a href="/download/<%= file._id %>"
                      class="text-decoration-none mr-3">
                     <i class="fa fa-download"></i>
                    </a>
                  </div>
                  <button class="btn btn-none">
                    <i class="fa fa-trash text-danger"></i>
                  </button>
              </form>
            </li>
          <% }); %>
        </ul>
      </div>
    <% } %>
</div>
<%- include("../partials/footer") %>